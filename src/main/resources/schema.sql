CREATE TABLE IF NOT EXISTS mpa
(
	id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	name varchar(6)	NOT NULL
);

CREATE TABLE IF NOT EXISTS genres
(
	id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	name varchar(40) NOT NULL
);

CREATE TABLE IF NOT EXISTS films
(
	id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	name varchar(40) NOT NULL,
	description varchar(500),
	release_date date NOT NULL,
	duration int NOT NULL,
	mpa_id int REFERENCES mpa(id)
);

CREATE TABLE IF NOT EXISTS film_genre
(
	id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	film_id int REFERENCES films(id) ON DELETE CASCADE,
	genre_id int REFERENCES genres(id) ON DELETE CASCADE
);

CREATE TABLE IF NOT EXISTS users
(
	id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	email varchar(40) NOT NULL,
	login varchar(40) NOT NULL,
	name varchar(80),
	birthday date NOT NULL
);

CREATE TABLE IF NOT EXISTS friendships
(
	id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	user_id int REFERENCES users(id) ON DELETE CASCADE,
	friend_id int REFERENCES users(id) ON DELETE CASCADE
);

CREATE TABLE IF NOT EXISTS likes
(
	id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	user_id int REFERENCES users(id) ON DELETE CASCADE,
	film_id int REFERENCES films(id) ON DELETE CASCADE
);